<div id="sform">
    <form action="/hospital" id="hospitalForm">
        <h2>ë³‘ì›ì •ë³´ ìˆ˜ì •</h2>
        <label for="name">ë³‘ì›ì´ë¦„</label>
        <input type="text" id="name" name="name" required />
        <label for="address">ì£¼ì†Œ</label>
        <input type="text" id="address" name="address" required onclick="openModal()" />
        <label for="phone">ì „í™”ë²ˆí˜¸</label>
        <input type="text" id="phone" name="phone" required />
        <button type="submit">ìˆ˜ì •í•˜ê¸°</button>
    </form>
</div>

<style>
    #modal {
        max-height: 500px;
        overflow-y: scroll;
    }
</style>

<!-- ëª¨ë‹¬ì°½ -->
<div id="modal" class="modal">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addressModalLabel">ì£¼ì†Œ ê²€ìƒ‰</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                í˜„ì¬ í˜ì´ì§€ :
                <input type="number" id="currentPage" value="1" style="text-align: center" />
                <div style="height: 5px"></div>
                í˜ì´ì§€ë‹¹ ì¶œë ¥ ê°œìˆ˜ :
                <input type="number" id="countPerPage" value="5" style="text-align: center" />
                <hr />
                <br />

                <input
                    type="text"
                    id="zipCode"
                    value=""
                    onClick="addressWindowOpen();"
                    placeholder="00000"
                    readonly
                />

                <input type="button" onClick="addressWindowOpen();" value="ìš°í¸ë²ˆí˜¸ ì°¾ê¸°" />

                <div id="wrap">
                    <div id="closeBtn" onClick="addressWindowClose();">
                        <i class="fa-sharp fa-solid fa-rectangle-xmark"></i>
                    </div>
                    <div>
                        <input
                            type="text"
                            id="searchAddr"
                            value=""
                            onkeydown="enterSearch();"
                            placeholder="ë„ë¡œëª…ì£¼ì†Œ, ê±´ë¬¼ëª… ë˜ëŠ” ì§€ë²ˆ ì…ë ¥"
                        />
                        <input type="button" onClick="getAddr();" value="ì£¼ì†Œê²€ìƒ‰" />
                    </div>

                    <div>
                        <div id="totoalOutcome">ê²€ìƒ‰ê²°ê³¼ : <span id="totalCnt">0</span></div>
                        <table id="list"></table>
                    </div>

                    <div id="pagingList" style="text-align: center"></div>
                </div>

                <div style="height: 5px"></div>

                <input
                    type="text"
                    id="roadaddress"
                    value=""
                    placeholder="ë„ë¡œëª… ì£¼ì†Œ, ì§€ë²ˆ ì£¼ì†Œ"
                    readonly
                />

                <div style="height: 5px"></div>

                <input type="button" value="ì…ë ¥" onclick="inputData()" />
            </div>
        </div>
    </div>
</div>

<script src="/js/road.js"></script>

<script>
    $(document).ready(function () {
        informationHospital();
    });
    function informationHospital() {
        $.ajax({
            type: 'GET',
            url: '/api/hospitals/information',
            dataType: 'json',
            success: function (response) {
                const hospital = response.data;

                // ë³‘ì› ì •ë³´ë¥¼ formì— ì‚½ì…
                $('#name').val(hospital.name);
                $('#address').val(hospital.address);
                $('#phone').val(hospital.phone);
            },
        });
    }

    $('#hospitalForm').submit(function (e) {
        e.preventDefault(); // ê¸°ë³¸ ì´ë²¤íŠ¸ ë§‰ê¸°

        const formData = $(this).serialize(); // form ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

        $.ajax({
            type: 'PUT', // ìˆ˜ì • ìš”ì²­
            url: '/api/hospitals/register/edit',
            data: formData, // form ë°ì´í„° ì „ì†¡
            success: function (response) {
                swal('ğŸ˜Š ì •ë³´ìˆ˜ì • ì„±ê³µ!', 'ë³‘ì› ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                // ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ëœ ê²½ìš° ì²˜ë¦¬í•  ë‚´ìš©ì„ ì‘ì„±

                window.location.href = '/hospital';
                // alert ì´í›„ ë³‘ì› ê´€ë¦¬í˜ì´ì§€ë¡œ ì´ë™
            },
            error: function (xhr) {
                swal('ğŸ˜­ ì •ë³´ìˆ˜ì • ì‹¤íŒ¨', 'ë³‘ì› ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                // ìˆ˜ì •ì— ì‹¤íŒ¨í•œ ê²½ìš° ì²˜ë¦¬í•  ë‚´ìš©ì„ ì‘ì„±
            },
        });
    });
</script>
