<style>
    table {
        border-collapse: collapse;
        width: 100%;
        margin-bottom: 1rem;
        background-color: #fff;
        box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
        font-size: 14px;
        text-align: left;
    }

    table th,
    table td {
        padding: 0.8rem;
        border: 1px solid #ddd;
    }

    table th {
        background-color: #f2f2f2;
        font-weight: bold;
    }

    table tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    table tr:hover {
        background-color: #f5f5f5;
    }
</style>

<h1>ì˜ì‚¬ ì •ë³´ ë“±ë¡</h1>
<form id="form">
    <div>
        <label for="name">ì´ë¦„:</label>
        <input type="text" id="name" name="name">
    </div>
    <div>
        <label for="contents">ì†Œê°œê¸€:</label>
        <textarea id="contents" name="contents"></textarea>
    </div>
    <div>
        <label for="image">í”„ë¡œí•„ ì´ë¯¸ì§€:</label>
        <input type="file" id="image" name="image">
    </div>
    <div class="checkbox-grid">
        <label for="categories">ì¹´í…Œê³ ë¦¬:</label>
        <table class="table" id="checkbox-grid">
            <tr>
                <td><input type="checkbox" id="category1" name="categories" value="ê°ì—¼ë‚´ê³¼">
                    <label for="category1">ê°ì—¼ë‚´ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category2" name="categories" value="ë‚´ë¶„ë¹„ë‚´ê³¼">
                    <label for="category2">ë‚´ë¶„ë¹„ë‚´ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category3" name="categories" value="ë¥˜ë§ˆí‹°ìŠ¤ë‚´ê³¼">
                    <label for="category3">ë¥˜ë§ˆí‹°ìŠ¤ë‚´ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category4" name="categories" value="ìˆœí™˜ê¸°ë‚´ê³¼">
                    <label for="category4">ìˆœí™˜ê¸°ë‚´ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category5" name="categories" value="ì‹ ì¥ë‚´ê³¼">
                    <label for="category5">ì‹ ì¥ë‚´ê³¼</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="category6" name="categories" value="ì•Œë ˆë¥´ê¸°ë‚´ê³¼">
                    <label for="category6">ì•Œë ˆë¥´ê¸°ë‚´ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category7" name="categories" value="í˜ˆì•¡ì¢…ì–‘ë‚´ê³¼">
                    <label for="category7">í˜ˆì•¡ì¢…ì–‘ë‚´ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category8" name="categories" value="í˜¸í¡ê¸°ë‚´ê³¼">
                    <label for="category8">í˜¸í¡ê¸°ë‚´ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category9" name="categories" value="ëŒ€ì¥í•­ë¬¸">
                    <label for="category9">ëŒ€ì¥í•­ë¬¸</label>
                </td>
                <td>
                    <input type="checkbox" id="category10" name="categories" value="ì„±í˜•ì™¸ê³¼">
                    <label for="category10">ì„±í˜•ì™¸ê³¼</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="category11" name="categories" value="ì‹ ê²½ì™¸ê³¼">
                    <label for="category11">ì‹ ê²½ì™¸ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category12" name="categories" value="ì™¸ê³¼">
                    <label for="category12">ì™¸ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category13" name="categories" value="ì •í˜•ì™¸ê³¼">
                    <label for="category13">ì •í˜•ì™¸ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category14" name="categories" value="í‰ë¶€ì™¸ê³¼">
                    <label for="category14">í‰ë¶€ì™¸ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category15" name="categories" value="ì‚°ë¶€ì¸ê³¼">
                    <label for="category15">ì‚°ë¶€ì¸ê³¼</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="category16" name="categories" value="í”¼ë¶€ê³¼">
                    <label for="category16">í”¼ë¶€ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category17" name="categories" value="ë¹„ë‡¨ê¸°ê³¼">
                    <label for="category17">ë¹„ë‡¨ê¸°ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category18" name="categories" value="ì•ˆê³¼">
                    <label for="category18">ì•ˆê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category19" name="categories" value="ì´ë¹„ì¸í›„ê³¼">
                    <label for="category19">ì´ë¹„ì¸í›„ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category20" name="categories" value="ì •ì‹ ê³¼">
                    <label for="category20">ì •ì‹ ê³¼</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="category21" name="categories" value="ë§ˆì·¨í†µì¦ì˜í•™ê³¼">
                    <label for="category21">ë§ˆì·¨í†µì¦ì˜í•™ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category22" name="categories" value="ê°€ì •ì˜í•™ê³¼">
                    <label for="category22">ê°€ì •ì˜í•™ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category23" name="categories" value="ì‘ê¸‰ì˜í•™ê³¼">
                    <label for="category23">ì‘ê¸‰ì˜í•™ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category24" name="categories" value="ì¬í™œì˜í•™ê³¼">
                    <label for="category24">ì¬í™œì˜í•™ê³¼</label>
                </td>
                <td>
                    <input type="checkbox" id="category25" name="categories" value="ì˜ìƒì˜í•™ê³¼">
                    <label for="category25">ì˜ìƒì˜í•™ê³¼ </label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="category26" name="categories" value="ë°©ì‚¬ì„ ì¢…ì–‘í•™ê³¼">
                    <label for="category26">ë°©ì‚¬ì„ ì¢…ì–‘í•™ê³¼  </label>
                </td>
                <td>
                    <input type="checkbox" id="category27" name="categories" value="í•µì˜í•™ê³¼">
                    <label for="category27">í•µì˜í•™ê³¼  </label>
                </td>
                <td>
                    <input type="checkbox" id="category28" name="categories" value="ì§„ë‹¨ê²€ì‚¬ì˜í•™ê³¼">
                    <label for="category28">ì§„ë‹¨ê²€ì‚¬ì˜í•™ê³¼  </label>
                </td>
                <td>
                    <input type="checkbox" id="category29" name="categories" value="ë³‘ë¦¬ê³¼">
                    <label for="category29">ë³‘ë¦¬ê³¼  </label>
                </td>
                <td>
                    <input type="checkbox" id="category30" name="categories" value="ì˜ê³µí•™ê³¼">
                    <label for="category30">ì˜ê³µí•™ê³¼  </label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="category31" name="categories" value="í•œë°©ê³¼">
                    <label for="category31">í•œë°©ê³¼  </label>
                </td>
            </tr>
        </table>
    <div>
        <button type="submit">ë“±ë¡</button>
    </div>
</form>
<script>
    form.addEventListener('submit', async (event) => {
        event.preventDefault();

        const name = document.getElementById('name').value;
        const contents = document.getElementById('contents').value;
        const imageInput = document.getElementById('image');
        const imageFile = imageInput.files[0];

        if (!imageFile) {
            swal({
                title: 'âœ ì…ë ¥ì •ë³´ ì¶”ê°€ìš”ë§!',
                text: 'íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.',
                icon: 'info',
            }).then(() => {
                return;
            });
        }
        
        const formData = new FormData();
              formData.append('name', name);
              formData.append('contents', contents);
              formData.append('image', imageFile);
                const categories = document.querySelectorAll('input[name="categories"]:checked');
                const categoryValues = Array.from(categories).map(category => category.value);
                // formData.append('categories[]', ...categoryValues);
               //  formData.append('categories[]', categoryValues.join(','));
               categoryValues.forEach(category => {
                        formData.append('categories[]', category);
                });


        try {
            const response = await fetch('/api/hospitals/register/doctor', {
                method: 'POST',
                body: formData,
            });
            if (response.ok) {
                const data = await response.json();
                swal({
                    title: 'ğŸ˜Š ì˜ì‚¬ ë“±ë¡ ì„±ê³µ!',
                    text: 'ì˜ì‚¬ ì •ë³´ ë“±ë¡ ì„±ê³µ',
                    icon: 'success',
                }).then(() => {
                    window.location.href = '/hospital';
                });
            } else {
                swal('ğŸ˜­ ì˜ì‚¬ ë“±ë¡ ì‹¤íŒ¨', 'ì˜ì‚¬ ì •ë³´ ë“±ë¡ ì‹¤íŒ¨', 'error');
            }
        } catch (error) {
            console.error(error);
        }
    });
</script>