<style>
  body {
    margin-top: 100px;
    line-height: 1.6;
  }

  .container1 {
    width: 1700px;
    margin: 0px 0px 0px -180px;
  }

  ul.tabs {
    margin: 0px;
    padding: 0px;
    list-style: none;
  }

  ul.tabs li {
    font-family: 'Source Sans Pro', Helvetica, sans-serif;
    font-weight: bold;
    background: none;
    color: #222;
    display: inline-block;
    padding: 10px 15px;
    cursor: pointer;
  }

  ul.tabs li.current {
    background: #ededed;
    color: #222;
  }

  .tab-content {
    display: none;
    background: #ededed;
    padding: 15px;
  }

  .tab-content.current {
    display: inherit;
  }

  .list-MS {
    font-family: 'Trebuchet MS', serif;
    font-weight: 900;
  }

  .list-name {
    font-weight: 900;
  }

  #select {
    width: 200px;
  }

  #filter-content {
    width: 250px;
  }

  #filter-value {
    border-radius: 7.5px;
    border: 2px solid gainsboro;
    padding-left: 20px;
    margin: 0px 0px 20px 20px;
  }

  #btn_init {
    font-size: 0.7em;
    width: 120px;
    height: 48px;
    letter-spacing: 0.5px;
    text-align: center;
    padding: 0px 0px 0px 0px;
    border-color: gainsboro;
    border-radius: 7.5px;
  }

  /* ì˜ì‚¬ í”„ë¡œí•„ ì¹´ë“œ*/
  .profile-card {
    background-color: white;
    border-radius: 5px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    padding: 20px;
    width: 300px;
    margin: 50px auto;
  }

  .profile-card img {
    width: 100%;
    border-radius: 5px 5px 0 0;
  }

  .profile-card h1 {
    font-size: 24px;
    margin-top: 0;
  }

  .profile-card p {
    font-size: 16px;
    color: #777;
  }




  #content-image {
    padding: 30px;
    text-align: center;
  }

  #bigimages {
    margin-bottom: 10px;
  }

  #bigimage {
    width: 310px;
    height: 310;
  }

  .small {
    width: 100px;
    height: 100px;
  }
</style>
<div id="main">
  <div class="inner">
    <h1>ë°±ì˜¤í”¼ìŠ¤</h1>


    <section class="ftco-section">
      <div class="container">
        <ul class="tabs">
          <li class="tab-link current" data-tab="tab-1">ì „ì²´ ì˜ˆì•½ê´€ë¦¬</li>
          <li class="tab-link" data-tab="tab-2">ì˜ˆì•½í™•ì •</li>
          <li class="tab-link" data-tab="tab-3">ì˜ˆì•½ëŒ€ê¸°</li>
          <li class="tab-link" data-tab="tab-4">ë¦¬ë·°ê´€ë¦¬</li>
          <li class="tab-link" data-tab="tab-5">ë³‘ì› ì •ë³´</li>
          <li class="tab-link" data-tab="tab-6">ì˜ì‚¬ ì •ë³´</li>
        </ul>

        <div id="tab-1" class="tab-content current">
          <div class="row">
            <div class="col-md-12">
              <div class="table-wrap">
                <table class="table" id="reservationList">
                  <thead class="thead-primary">
              </div>
              <tr>
                <th scope="col">#</th>
                <th scope="col">ë‹¹ë‹´ì˜ì‚¬</th>
                <th scope="col">í™˜ì</th>
                <th scope="col">ì „í™”</th>
                <th scope="col">ì¦ìƒ</th>
                <th scope="col">ì˜ˆì•½ë‚ ì§œ</th>
                <th scope="col">ìŠ¹ì¸</th>
                <th scope="col">ë²„íŠ¼</th>
              </tr>
              </thead>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div id="tab-2" class="tab-content">
        <div class="row">
          <div class="col-md-12">
            <div class="table-wrap">
              <table class="table" id="approvedreservationList">
                <thead class="thead-primary">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">ë‹¹ë‹´ì˜ì‚¬</th>
                    <th scope="col">í™˜ì</th>
                    <th scope="col">ì „í™”</th>
                    <th scope="col">ì¦ìƒ</th>
                    <th scope="col">ì˜ˆì•½ë‚ ì§œ</th>
                    <th scope="col">ìŠ¹ì¸</th>
                    <th scope="col">ë²„íŠ¼</th>
                  </tr>
                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div id="tab-3" class="tab-content">
        <div class="row">
          <div class="col-md-12">
            <div class="table-wrap">
              <table class="table" id="waitingreservationList">
                <thead class="thead-primary">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">ë‹¹ë‹´ì˜ì‚¬</th>
                    <th scope="col">í™˜ì</th>
                    <th scope="col">ì „í™”</th>
                    <th scope="col">ì¦ìƒ</th>
                    <th scope="col">ì˜ˆì•½ë‚ ì§œ</th>
                    <th scope="col">ìŠ¹ì¸</th>
                    <th scope="col">ë²„íŠ¼</th>
                  </tr>
                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div id="tab-4" class="tab-content">
        <div class="row">
          <div class="col-md-12">
            <div class="table-wrap">
              <table class="table" id="reviewList">
                <thead class="thead-primary">
                  <tr>
                    <th>#</th>
                    <th>ì‘ì„±ì</th>
                    <th>ë‚´ìš©</th>
                    <th>í‰ì </th>
                    <th>ì‘ì„±ë‚ ì§œ</th>
                  </tr>
                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div id="tab-5" class="tab-content">
        <div class="card">
          <div class="card-body">
            <h1 class="card-title">[name]</h1>
            <p class="card-text">ì£¼ì†Œ: [address]</p>
            <p class="card-text">ì „í™”ë²ˆí˜¸: [phone]</p>
            <p class="card-text">ìœ„ë„: [latitude]</p>
            <p class="card-text">ê²½ë„: [longitude]</p>
            <p class="card-text">ìƒì„± ë‚ ì§œ: [createdAt]</p>
            <p class="card-text">ì—…ë°ì´íŠ¸ ë‚ ì§œ: [updatedAt]</p>
            <button onclick="location.href='/register'">ìš°ë¦¬ ë³‘ì› ë“±ë¡í•˜ê¸°</button>
            <button onclick="location.href='/edit'">ìš°ë¦¬ ë³‘ì› ìˆ˜ì •í•˜ê¸°</button>
          </div>
          <div id="content-image">
            <h3>ë³‘ì› ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°</h3>
          </div>

          <form id="imageForm" action="/api/hospitals/register/image" method="POST" enctype="multipart/form-data">
            <input type="file" name="images" multiple>
            <input type="submit" value="Upload">
          </form>
        </div>
      </div>
      <div id="tab-6" class="tab-content">
        <div id="cards-container">
        </div>
        <div>
          <button onclick="location.href='/doctorRegister'">ì˜ì‚¬ ë“±ë¡í•˜ê¸°</button>
        </div>

      </div>
    </section>
  </div>
</div>




<script>
  $(document).ready(function () {
    reservationList();
    waitedreservationList();
    approvedreservationList();
    reviewList();
  });


  // ì „ì²´ ì˜ˆì•½ê´€ë¦¬ 
  function extractReservations(reservationData) {
    let reservations = [];

    for (let i = 0; i < reservationData.length; i++) {
      let hospitalId = reservationData[i]['hospitalId'];
      let hospitalName = reservationData[i]['name'];

      let doctors = reservationData[i]['doctors'];
      for (let j = 0; j < doctors.length; j++) {
        let doctorId = doctors[j]['doctorId'];
        let doctorName = doctors[j]['name'];
        let reservationsOfDoctor = doctors[j]['reservations'];
        if (reservationsOfDoctor) {
          for (let k = 0; k < reservationsOfDoctor.length; k++) {
            let reservation = reservationsOfDoctor[k];
            reservations.push({
              hospitalId: hospitalId,
              hospitalName: hospitalName,
              doctorId: doctorId,
              doctorName: doctorName,
              id: reservation['id'],
              name: reservation['name'],
              // idNumber: reservation['idNumber'],
              phone: reservation['phone'],
              contents: reservation['contents'],
              date: reservation['date'],
              status: reservation['status'],
            });
          }
        }
      }
    }
    return reservations;
  }

  function reservationList() {
    $.ajax({
      type: 'GET',
      url: '/api/hospitals/reservation',
      dataType: 'json',
      success: function (response) {
        let reservations = extractReservations(response['reservationdata']);
        for (let i = 0; i < reservations.length; i++) {
          let reservation = reservations[i];
          if (reservation.status === "done" || reservation.status === "canceled") {
            let temp_html = `<tbody>
          <tr>
            <th scope="row">${i + 1}</th>
            <td>${reservation.doctorName}</td>
            <td>${reservation.name}</td>
            <td>${reservation.phone}</td>                              
            <td>${reservation.contents}</td>
            <td>${reservation.date}</td>
            <td>
                <select disabled class="form-select" id="statusSelect-${reservation.id}" data-reservation-id="${reservation.id}">
                <option value="waiting" ${reservation.status === 'waiting' ? 'selected' : ''}>ëŒ€ê¸°</option>
                <option value="approved" ${reservation.status === 'approved' ? 'selected' : ''}>ìŠ¹ì¸</option>
                <option value="canceled" ${reservation.status === 'canceled' ? 'selected' : ''}>ê±°ì ˆ</option>
                <option value="done" ${reservation.status === 'done' ? 'selected' : ''}>ì§„ë£Œì™„ë£Œ</option>
                </select>
            </td>                  
            <td><button class="btn btn-primary" id="approveButton-${reservation.id}" data-reservation-id="${reservation.id}">ìŠ¹ì¸</button></td>                                               
          </tr>
        </tbody>`;
            $('#reservationList').append(temp_html);
          } else {
            let temp_html = `<tbody>
          <tr>
            <th scope="row">${i + 1}</th>
            <td>${reservation.doctorName}</td>
            <td>${reservation.name}</td>
            <td>${reservation.phone}</td>                              
            <td>${reservation.contents}</td>
            <td>${reservation.date}</td>
            <td>
                <select class="form-select" id="statusSelect-${reservation.id}" data-reservation-id="${reservation.id}">
                <option value="waiting" ${reservation.status === 'waiting' ? 'selected' : ''}>ëŒ€ê¸°</option>
                <option value="approved" ${reservation.status === 'approved' ? 'selected' : ''}>ìŠ¹ì¸</option>
                <option value="canceled" ${reservation.status === 'canceled' ? 'selected' : ''}>ê±°ì ˆ</option>
                <option value="done" ${reservation.status === 'done' ? 'selected' : ''}>ì§„ë£Œì™„ë£Œ</option>
                </select>
            </td>                  
            <td><button class="btn btn-primary" id="approveButton-${reservation.id}" data-reservation-id="${reservation.id}">ìŠ¹ì¸</button></td>                                               
          </tr>
        </tbody>`;
            $('#reservationList').append(temp_html);
          }
        }

        // ìŠ¹ì¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        $(document).on('click', 'button[id^="approveButton-"]', function () {
          let id = $(this).data('reservation-id');
          let statusSelect = $(`#statusSelect-${id}`).val();
          // í™•ì¸ ë©”ì‹œì§€ë¥¼ ë„ìš°ê³ , ì˜ˆë¥¼ ì„ íƒí•˜ë©´ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
          swal({
            title: 'ì •ë§ë¡œ ì˜ˆì•½ ìƒíƒœë¥¼ ë³€ê²½ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
            icon: 'warning',
            buttons: ["ì•„ë‹ˆì˜¤", "ì˜ˆ"],
            dangerMode: true,
          }).then((willChange) => {
            if (willChange) {
              // ì˜ˆë¥¼ ì„ íƒí•œ ê²½ìš°, ì„ íƒëœ ìƒíƒœë¡œ ì˜ˆì•½ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
              $.ajax({
                type: 'PATCH',
                url: `/api/hospitals/reservation/status/${id}`,
                dataType: 'json',
                data: {
                  status: statusSelect
                },
                success: function (response) {
                  window.location.href = "/hospital";
                },
                error: function (xhr, status, error) {
                  // ì—ëŸ¬ ì²˜ë¦¬ ì½”ë“œ
                }
              });
            }
          });
        });

      },
      error: function (xhr, status, error) {
        // ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
        // alert(xhr.responseJSON.message);
      }
    });
  }


  // ì˜ˆì•½ëŒ€ê¸°
  function extractWaitingReservations(waitingdata) {

    let reservations = [];

    for (let i = 0; i < waitingdata.length; i++) {
      let hospitalId = waitingdata[i]['hospitalId'];
      let hospitalName = waitingdata[i]['name'];

      let doctors = waitingdata[i]['doctors'];
      for (let j = 0; j < doctors.length; j++) {
        let doctorId = doctors[j]['doctorId'];
        let doctorName = doctors[j]['name'];
        let reservationsOfDoctor = doctors[j]['reservations'];
        if (reservationsOfDoctor) {
          for (let k = 0; k < reservationsOfDoctor.length; k++) {
            let reservation = reservationsOfDoctor[k];
            reservations.push({
              hospitalId: hospitalId,
              hospitalName: hospitalName,
              doctorId: doctorId,
              doctorName: doctorName,
              id: reservation['id'],
              name: reservation['name'],
              // idNumber: reservation['idNumber'],
              phone: reservation['phone'],
              contents: reservation['contents'],
              date: reservation['date'],
              status: reservation['status'],
            });
          }
        }
      }
    }
    return reservations;
  }

  function waitedreservationList() {
    $.ajax({
      type: 'GET',
      url: '/api/hospitals/reservation/status',
      dataType: 'json',
      success: function (response) {

        let waitingreservations = extractWaitingReservations(response['waitingdata']);
        for (let i = 0; i < waitingreservations.length; i++) {
          let reservation = waitingreservations[i];

          let temp_html = `<tbody>
          <tr>
            <th scope="row">${i + 1}</th>
            <td>${reservation.doctorName}</td>
            <td>${reservation.name}</td>
            <td>${reservation.phone}</td>                              
            <td>${reservation.contents}</td>
            <td>${reservation.date}</td>
            <td>
                <select class="form-select" id="statusSelect-${reservation.id}" data-reservation-id="${reservation.id}">
                <option value="waiting" ${reservation.status === 'waiting' ? 'selected' : ''}>ëŒ€ê¸°</option>
                <option value="approved" ${reservation.status === 'approved' ? 'selected' : ''}>ìŠ¹ì¸</option>
                <option value="canceled" ${reservation.status === 'canceled' ? 'selected' : ''}>ê±°ì ˆ</option>
                
                </select>
            </td>                  
            <td><button class="btn btn-primary" id="waitingButton-${reservation.id}" data-reservation-id="${reservation.id}">ìŠ¹ì¸</button></td>                                                                                                        
          </tr>
        </tbody>`;
          $('#waitingreservationList').append(temp_html);
        }

        // ìŠ¹ì¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        $(document).on('click', 'button[id^="waitingButton-"]', function () {
          let id = $(this).data('reservation-id');
          let statusSelect = $(this).closest('tr').find('select').val();
          // í™•ì¸ ë©”ì‹œì§€ë¥¼ ë„ìš°ê³ , ì˜ˆë¥¼ ì„ íƒí•˜ë©´ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
          swal({
            title: 'ì •ë§ë¡œ ì˜ˆì•½ ìƒíƒœë¥¼ ë³€ê²½ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
            icon: 'warning',
            buttons: ["ì•„ë‹ˆì˜¤", "ì˜ˆ"],
            dangerMode: true,
          }).then((willChange) => {
            if (willChange) {
              // ì˜ˆë¥¼ ì„ íƒí•œ ê²½ìš°, ì„ íƒëœ ìƒíƒœë¡œ ì˜ˆì•½ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
              $.ajax({
                type: 'PATCH',
                url: `/api/hospitals/reservation/status/${id}`,
                dataType: 'json',
                data: {
                  status: statusSelect
                },
                success: function (response) {
                  window.location.href = "/hospital";
                },
                error: function (xhr, status, error) {
                  // ì—ëŸ¬ ì²˜ë¦¬ ì½”ë“œ
                }
              });
            }
          });
        });

      },
    });
  }

  // ì˜ˆì•½í™•ì • ë¶ˆëŸ¬ì˜¤ê¸° 
  function extractApprovedReservations(approveddata) {

    let reservations = [];

    for (let i = 0; i < approveddata.length; i++) {
      let hospitalId = approveddata[i]['hospitalId'];
      let hospitalName = approveddata[i]['name'];

      let doctors = approveddata[i]['doctors'];
      for (let j = 0; j < doctors.length; j++) {
        let doctorId = doctors[j]['doctorId'];
        let doctorName = doctors[j]['name'];
        let reservationsOfDoctor = doctors[j]['reservations'];
        if (reservationsOfDoctor) {
          for (let k = 0; k < reservationsOfDoctor.length; k++) {
            let reservation = reservationsOfDoctor[k];
            reservations.push({
              hospitalId: hospitalId,
              hospitalName: hospitalName,
              doctorId: doctorId,
              doctorName: doctorName,
              id: reservation['id'],
              name: reservation['name'],
              // idNumber: reservation['idNumber'],
              phone: reservation['phone'],
              contents: reservation['contents'],
              date: reservation['date'],
              status: reservation['status'],
            });
          }
        }
      }
    }
    return reservations;
  }

  function approvedreservationList() {
    $.ajax({
      type: 'GET',
      url: '/api/hospitals/reservation/approved',
      dataType: 'json',
      success: function (response) {

        let approvedreservations = extractApprovedReservations(response['approveddata']);
        for (let i = 0; i < approvedreservations.length; i++) {
          let reservation = approvedreservations[i];

          let temp_html = `<tbody>
          <tr>
            <th scope="row">${i + 1}</th>
            <td>${reservation.doctorName}</td>
            <td>${reservation.name}</td> 
            <td>${reservation.phone}</td>                              
            <td>${reservation.contents}</td>
            <td>${reservation.date}</td>
            <td>
                <select class="form-select" id="statusSelect-${reservation.id}" data-reservation-id="${reservation.id}">
                <option value="waiting" ${reservation.status === 'waiting' ? 'selected' : ''}>ëŒ€ê¸°</option>
                <option value="approved" ${reservation.status === 'approved' ? 'selected' : ''}>ìŠ¹ì¸</option>
                <option value="canceled" ${reservation.status === 'canceled' ? 'selected' : ''}>ê±°ì ˆ</option>
                <option value="done" ${reservation.status === 'done' ? 'selected' : ''}>ì§„ë£Œì™„ë£Œ</option>
                </select>
            </td>                  
            <td><button class="btn btn-primary" id="clearButton-${reservation.id}" data-reservation-id="${reservation.id}">ìŠ¹ì¸</button></td>                                                                                                        
          </tr>
        </tbody>`;
          $('#approvedreservationList').append(temp_html);
        }

        // ìŠ¹ì¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        $(document).on('click', 'button[id^="clearButton-"]', function () {
          let id = $(this).data('reservation-id');
          let statusSelect = $(this).closest('tr').find('select').val();
          // í™•ì¸ ë©”ì‹œì§€ë¥¼ ë„ìš°ê³ , ì˜ˆë¥¼ ì„ íƒí•˜ë©´ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
          swal({
            title: 'ì •ë§ë¡œ ì˜ˆì•½ ìƒíƒœë¥¼ ë³€ê²½ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
            icon: 'warning',
            buttons: ["ì•„ë‹ˆì˜¤", "ì˜ˆ"],
            dangerMode: true,
          }).then((willChange) => {
            if (willChange) {
              // ì˜ˆë¥¼ ì„ íƒí•œ ê²½ìš°, ì„ íƒëœ ìƒíƒœë¡œ ì˜ˆì•½ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
              $.ajax({
                type: 'PATCH',
                url: `/api/hospitals/reservation/status/${id}`,
                dataType: 'json',
                data: {
                  status: statusSelect
                },
                success: function (response) {
                  window.location.href = "/hospital";
                },
                error: function (xhr, status, error) {
                  // ì—ëŸ¬ ì²˜ë¦¬ ì½”ë“œ
                }
              });
            }
          });
        });
      },
      error: function (xhr, status, error) {
        // ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥
        // alert(xhr.responseJSON.message);
      }
    });
  }

  //ë¦¬ë·°ê´€ë¦¬
  function reviewList() {
    $.ajax({
      type: 'GET',
      url: '/api/hospitals/reviews',
      dataType: 'json',
      success: function (response) {
        let reviews = response['data'];

        for (let i = 0; i < reviews.length; i++) {
          let userId = reviews[i]['userId'];
          let name = reviews[i]['name'];
          let contents = reviews[i]['reviews'][0]['contents'];
          let star = reviews[i]['reviews'][0]['star'];
          let reviewCreatedAt = reviews[i]['reviews'][0]['reviewCreatedAt'];

          let temp_html = `<tbody>
            <tr>
              <th scope="row">${i + 1}</th>
              <td>${name}</td>
              <td>${contents}</td>
              <td>${star}</td>
              <td>${reviewCreatedAt}</td>
            </tr>
          </tbody>`;

          $('#reviewList').append(temp_html);
        }
      },
      error: function (xhr, status, error) {
        // ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥
        // alert(xhr.responseJSON.message);
      }
    });
  }

  // htmlì´ ë¡œë“œ ë˜ë©´ ìë™ìœ¼ë¡œ informationHospital() -> (ë³‘ì› ì •ë³´)í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜´. 
  $(document).ready(function () {
    informationHospital();
    getImageHospital();
  });

  function informationHospital() {
    $.ajax({
      type: 'GET',
      url: '/api/hospitals/information',
      dataType: 'json',
      success: function (response) {
        const hospital = response.data;

        $('.card-title').text(hospital.name);
        $('.card-text:eq(0)').text('ì£¼ì†Œ: ' + hospital.address);
        $('.card-text:eq(1)').text('ì „í™”ë²ˆí˜¸: ' + hospital.phone);
        $('.card-text:eq(2)').text('ìœ„ë„: ' + hospital.latitude);
        $('.card-text:eq(3)').text('ê²½ë„: ' + hospital.longitude);
        $('.card-text:eq(4)').text('ìƒì„± ë‚ ì§œ: ' + hospital.createdAt);
        $('.card-text:eq(5)').text('ì—…ë°ì´íŠ¸ ë‚ ì§œ: ' + hospital.updatedAt);
      },
      error: function (xhr, status, error) {
        // ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥
        // alert(xhr.responseJSON.message);
      }
    });
  }

  // ë³‘ì› ì´ë¯¸ì§€ í˜¸ì¶œ 
  function getImageHospital() {
    $.ajax({
      type: 'GET',
      url: '/api/hospitals/information/hospitalImage',
      dataType: 'json',
      success: function (response) {
        const imagehospital = response;
        let temp_html = `
          <div id="bigimages">
            <img id="bigimage"
              src="${imagehospital[0].url}">
          </div>
          <div id="smallimages">
            ${imagehospital.map(image => `<img class="small" src="${image.url}">`).join('')}
          </div>`;
        $('#content-image').append(temp_html);
        var bigPic = document.querySelector("#bigimage");
        var smallPics = document.querySelectorAll(".small");

        for (let i = 0; i < smallPics.length; i++) {
          smallPics[i].addEventListener("click", changepic);
          smallPics[i].onclick = changepic;
        }

        function changepic() {
          let smallPicAttribute = this.getAttribute("src");
          bigPic.setAttribute("src", smallPicAttribute);
        }
      }
    })
  }

  // AJAXë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜
  // function loadProfileCards() {
  // 	var xhttp = new XMLHttpRequest();
  // 	xhttp.onreadystatechange = function() {
  // 		if (this.readyState == 4 && this.status == 200) {
  // 			// ë°ì´í„°ë¥¼ JSON ê°ì²´ë¡œ íŒŒì‹±
  // 			var data = JSON.parse(this.responseText);
  // 			// ì¹´ë“œ ìƒì„± í•¨ìˆ˜ í˜¸ì¶œ
  // 			createProfileCards(data);
  // 		}
  // 	};
  // 	xhttp.open("GET", "/api/hospitals/information/doctor", true);
  // 	xhttp.send();
  // }

  function loadProfileCards() {
    $.ajax({
      url: "/api/hospitals/information/doctor",
      method: "GET",
      success: function (data) {
        // ì¹´ë“œ ìƒì„± í•¨ìˆ˜ í˜¸ì¶œ
        createProfileCards(data);
      },
      error: function (xhr, status, error) {
        // ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ ë©”ì‹œì§€ ì¶œë ¥
        // alert(xhr.responseJSON.message);
      }
    });
  }

  // ì¹´ë“œë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
  function createProfileCards(data) {
    var container = document.getElementById("cards-container");
    for (let i = 0; i < data.length; i++) {
      var card = document.createElement("div");
      card.className = "profile-card";
      var image = document.createElement("img");
      image.src = data[i].image;
      image.alt = "í”„ë¡œí•„ ì‚¬ì§„";
      var name = document.createElement("h1");
      name.textContent = data[i].name;
      var contents = document.createElement("p");
      contents.textContent = data[i].contents;
      var editButton = document.createElement("button");
      editButton.textContent = "ìˆ˜ì • í•˜ê¸°";
      editButton.onclick = function () {
        location.href = `/doctorEdit/?doctorId=${data[i].doctorId}`
      };
      var createButton = document.createElement("button");
      createButton.textContent = "ì‹œê°„ ë“±ë¡";
      createButton.onclick = function () {
        location.href = `/doctorTime/?doctorId=${data[i].doctorId}`
      }
      card.appendChild(image);
      card.appendChild(name);
      card.appendChild(contents);
      card.appendChild(editButton);
      card.appendChild(createButton);
      container.appendChild(card);
    }
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¹´ë“œë¥¼ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
  loadProfileCards();

  // ì´ë¯¸ì§€ ìœ íš¨ì„± ê²€ì‚¬ ë° ì—…ë¡œë“œ 
  $(document).ready(function () {
    $('#imageForm').submit(function (e) {
      e.preventDefault();
      const files = document.querySelector('input[type="file"]').files;

      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        if (!validateFile(file)) {
          return;
        }
      }

      var formData = new FormData(this);

      $.ajax({
        url: $(this).attr('action'),
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function (response) {
          swal({
            title: 'ğŸ˜Š ì—…ë¡œë“œ ì„±ê³µ!',
            text: 'íŒŒì¼ ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!',
            icon: 'success',
          }).then(() => {
            window.location.href = "/hospital"
          });
        },
        error: function (xhr, status, error) {
          swal('ğŸ˜­ ì—…ë¡œë“œ ì‹¤íŒ¨', 'íŒŒì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', error);
        }
      });
    });
  });

  function validateFile(file) {
    const fileSize = file.size;
    const fileName = file.name;
    const maxSize = 5242880; // 5MB
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif']; // í—ˆìš© ê°€ëŠ¥í•œ íŒŒì¼ ìœ í˜•

    if (!allowedTypes.includes(file.type)) {
      swal({
        title: 'ğŸ˜“ ì£„ì†¡í•©ë‹ˆë‹¤.',
        text: 'ì´ íŒŒì¼ ìœ í˜•ì€ í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
        icon: 'warning',
      }).then(() => {
        event.preventDefault();
        return false;
      });
    }

    if (fileSize > maxSize) {
      swal({
        title: 'ğŸ˜“ ì£„ì†¡í•©ë‹ˆë‹¤.',
        text: `íŒŒì¼ í¬ê¸°ëŠ” ${maxSize / 1000000}MBë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`,
        icon: 'warning',
      }).then(() => {
        event.preventDefault();
        return false;
      });
    }
    return true;
  }


  $("#reservationList").on('click', 'select[id^="statusSelect-"]', function () {
    let selectedValue = $(this).val();
    if (selectedValue === 'approved') {
      $(this).find('option[value="waiting"]').prop('disabled', true);
      $(this).find('option[value="done"]').prop('disabled', false);
    }
  });



  $("#approvedreservationList").on('click', 'select[id^="statusSelect-"]', function () {
    let selectedValue = $(this).val();
    if (selectedValue === 'approved') {
      $(this).find('option[value="waiting"]').prop('disabled', true);
      $(this).find('option[value="done"]').prop('disabled', false);
      $(this).find('option[value="canceled"]').prop('disabled', true);
    }
  })

  $("#waitingreservationList").on('click', 'select[id^="statusSelect-"]', function () {
    let selectedValue = $(this).val();
    if (selectedValue === 'approved') {
      $(this).find('option[value="waiting"]').prop('disabled', true);
      $(this).find('option[value="canceled"]').prop('disabled', true);
    }
  })
</script>
